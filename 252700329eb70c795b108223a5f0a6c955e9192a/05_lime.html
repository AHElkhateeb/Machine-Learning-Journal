<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />



<meta name="date" content="2021-01-08" />

<title>05 LIME</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script>
<link href="site_libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="site_libs/anchor-sections-1.0/anchor-sections.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">MyLabJournal</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Index</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Journal
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="01_ml_fund.html">01 Machine Learning Fundamentals</a>
    </li>
    <li>
      <a href="02_ml_sup.html">02 Supervised ML</a>
    </li>
    <li>
      <a href="03_ml_aut.html">03 Automated Machine Learning with H20</a>
    </li>
    <li>
      <a href="04_perf_meas.html">04 Performance Measures</a>
    </li>
    <li>
      <a href="05_lime.html">05 LIME</a>
    </li>
    <li>
      <a href="06_dl.html">06 Deep Learning</a>
    </li>
  </ul>
</li>
<li>
  <a href="07_class_notes.html">Class notes</a>
</li>
<li>
  <a href="08_links.html">Links</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">05 LIME</h1>
<h4 class="date">2021-01-08</h4>

</div>


<pre class="r"><code># Load Libraries 
library(h2o)
library(rsample)
library(recipes)
library(readxl)
library(tidyverse)
library(tidyquant)
library(lime)

# Load Data
employee_attrition_tbl &lt;- read_csv(&quot;raw_data/datasets-1067-1925-WA_Fn-UseC_-HR-Employee-Attrition.txt&quot;)
definitions_raw_tbl    &lt;- read_excel(&quot;Machine Learning Fundamentals data/data_definitions.xlsx&quot;, sheet = 1, col_names = FALSE)

# Processing Pipeline
source(&quot;Processing_PipeLine.R&quot;)</code></pre>
<pre><code>## Rows: 1,470
## Columns: 35
## $ Age                      &lt;dbl&gt; 41, 49, 37, 33, 27, 32, 59, 30, 38, 36, 35...
## $ Attrition                &lt;fct&gt; Yes, No, Yes, No, No, No, No, No, No, No, ...
## $ BusinessTravel           &lt;fct&gt; Travel_Rarely, Travel_Frequently, Travel_R...
## $ DailyRate                &lt;dbl&gt; 1102, 279, 1373, 1392, 591, 1005, 1324, 13...
## $ Department               &lt;fct&gt; Sales, Research &amp; Development, Research &amp; ...
## $ DistanceFromHome         &lt;dbl&gt; 1, 8, 2, 3, 2, 2, 3, 24, 23, 27, 16, 15, 2...
## $ Education                &lt;fct&gt; College, Below College, College, Master, B...
## $ EducationField           &lt;fct&gt; Life Sciences, Life Sciences, Other, Life ...
## $ EmployeeCount            &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, ...
## $ EmployeeNumber           &lt;dbl&gt; 1, 2, 4, 5, 7, 8, 10, 11, 12, 13, 14, 15, ...
## $ EnvironmentSatisfaction  &lt;fct&gt; Medium, High, Very High, Very High, Low, V...
## $ Gender                   &lt;fct&gt; Female, Male, Male, Female, Male, Male, Fe...
## $ HourlyRate               &lt;dbl&gt; 94, 61, 92, 56, 40, 79, 81, 67, 44, 94, 84...
## $ JobInvolvement           &lt;fct&gt; High, Medium, Medium, High, High, High, Ve...
## $ JobLevel                 &lt;dbl&gt; 2, 2, 1, 1, 1, 1, 1, 1, 3, 2, 1, 2, 1, 1, ...
## $ JobRole                  &lt;fct&gt; Sales Executive, Research Scientist, Labor...
## $ JobSatisfaction          &lt;fct&gt; Very High, Medium, High, High, Medium, Ver...
## $ MaritalStatus            &lt;fct&gt; Single, Married, Single, Married, Married,...
## $ MonthlyIncome            &lt;dbl&gt; 5993, 5130, 2090, 2909, 3468, 3068, 2670, ...
## $ MonthlyRate              &lt;dbl&gt; 19479, 24907, 2396, 23159, 16632, 11864, 9...
## $ NumCompaniesWorked       &lt;dbl&gt; 8, 1, 6, 1, 9, 0, 4, 1, 0, 6, 0, 0, 1, 0, ...
## $ Over18                   &lt;fct&gt; Y, Y, Y, Y, Y, Y, Y, Y, Y, Y, Y, Y, Y, Y, ...
## $ OverTime                 &lt;fct&gt; Yes, No, Yes, Yes, No, No, Yes, No, No, No...
## $ PercentSalaryHike        &lt;dbl&gt; 11, 23, 15, 11, 12, 13, 20, 22, 21, 13, 13...
## $ PerformanceRating        &lt;fct&gt; Excellent, Outstanding, Excellent, Excelle...
## $ RelationshipSatisfaction &lt;fct&gt; Low, Very High, Medium, High, Very High, H...
## $ StandardHours            &lt;dbl&gt; 80, 80, 80, 80, 80, 80, 80, 80, 80, 80, 80...
## $ StockOptionLevel         &lt;dbl&gt; 0, 1, 0, 0, 1, 0, 3, 1, 0, 2, 1, 0, 1, 1, ...
## $ TotalWorkingYears        &lt;dbl&gt; 8, 10, 7, 8, 6, 8, 12, 1, 10, 17, 6, 10, 5...
## $ TrainingTimesLastYear    &lt;dbl&gt; 0, 3, 3, 3, 3, 2, 3, 2, 2, 3, 5, 3, 1, 2, ...
## $ WorkLifeBalance          &lt;fct&gt; Bad, Better, Better, Better, Better, Good,...
## $ YearsAtCompany           &lt;dbl&gt; 6, 10, 0, 8, 2, 7, 1, 1, 9, 7, 5, 9, 5, 2,...
## $ YearsInCurrentRole       &lt;dbl&gt; 4, 7, 0, 7, 2, 7, 0, 0, 7, 7, 4, 5, 2, 2, ...
## $ YearsSinceLastPromotion  &lt;dbl&gt; 0, 1, 0, 3, 2, 3, 0, 0, 1, 7, 0, 0, 4, 1, ...
## $ YearsWithCurrManager     &lt;dbl&gt; 5, 7, 0, 0, 2, 6, 0, 0, 8, 7, 3, 8, 3, 2, ...</code></pre>
<pre class="r"><code>employee_attrition_readable_tbl &lt;- process_hr_data_readable(employee_attrition_tbl, definitions_raw_tbl)

# Test and Train
set.seed(seed = 1113)
split_obj &lt;- rsample::initial_split(employee_attrition_readable_tbl, prop = 0.85)

# Assign training and test data
train_readable_tbl &lt;- training(split_obj)
test_readable_tbl  &lt;- testing(split_obj)

# ML Preprocessing Recipe 
recipe_obj &lt;- recipe(Attrition ~ ., data = train_readable_tbl) %&gt;%
  step_zv(all_predictors()) %&gt;%
  step_mutate_at(c(&quot;JobLevel&quot;, &quot;StockOptionLevel&quot;), fn = as.factor) %&gt;% 
  prep()

recipe_obj</code></pre>
<pre><code>## Data Recipe
## 
## Inputs:
## 
##       role #variables
##    outcome          1
##  predictor         34
## 
## Training data contained 1250 data points and no missing data.
## 
## Operations:
## 
## Zero variance filter removed EmployeeCount, Over18, StandardHours [trained]
## Variable mutation for JobLevel, StockOptionLevel [trained]</code></pre>
<pre class="r"><code>train_tbl &lt;- bake(recipe_obj, new_data = train_readable_tbl)
test_tbl  &lt;- bake(recipe_obj, new_data = test_readable_tbl)

#  Model
h2o.init()</code></pre>
<pre><code>##  Connection successful!
## 
## R is connected to the H2O cluster: 
##     H2O cluster uptime:         4 days 2 hours 
##     H2O cluster timezone:       Europe/Berlin 
##     H2O data parsing timezone:  UTC 
##     H2O cluster version:        3.32.0.1 
##     H2O cluster version age:    2 months and 30 days  
##     H2O cluster name:           H2O_started_from_R_Ahmed_Elkhateeb_hft524 
##     H2O cluster total nodes:    1 
##     H2O cluster total memory:   1.64 GB 
##     H2O cluster total cores:    4 
##     H2O cluster allowed cores:  4 
##     H2O cluster healthy:        TRUE 
##     H2O Connection ip:          localhost 
##     H2O Connection port:        54321 
##     H2O Connection proxy:       NA 
##     H2O Internal Security:      FALSE 
##     H2O API Extensions:         Amazon S3, Algos, AutoML, Core V3, TargetEncoder, Core V4 
##     R Version:                  R version 4.0.3 (2020-10-10)</code></pre>
<pre class="r"><code>automl_leader &lt;- h2o.loadModel(&quot;03_ml_aut_files/h20_models/DeepLearning_grid__1_AutoML_20210108_180910_model_2&quot;)
automl_leader</code></pre>
<pre><code>## Model Details:
## ==============
## 
## H2OBinomialModel: deeplearning
## Model ID:  DeepLearning_grid__1_AutoML_20210108_180910_model_2 
## Status of Neuron Layers: predicting Attrition, 2-class classification, bernoulli distribution, CrossEntropy loss, 19,602 weights/biases, 242.0 KB, 8,587 training samples, mini-batch size 1
##   layer units             type dropout       l1       l2 mean_rate rate_rms
## 1     1    95            Input  0.00 %       NA       NA        NA       NA
## 2     2   200 RectifierDropout 50.00 % 0.000000 0.000000  0.166861 0.376030
## 3     3     2          Softmax      NA 0.000000 0.000000  0.000554 0.000181
##   momentum mean_weight weight_rms mean_bias bias_rms
## 1       NA          NA         NA        NA       NA
## 2 0.000000   -0.002277   0.083428  0.481764 0.025722
## 3 0.000000    0.011297   0.399538 -0.000838 0.043929
## 
## 
## H2OBinomialMetrics: deeplearning
## ** Reported on training data. **
## ** Metrics reported on full training frame **
## 
## MSE:  0.07534004
## RMSE:  0.2744814
## LogLoss:  0.2815909
## Mean Per-Class Error:  0.2006076
## AUC:  0.8830095
## AUCPR:  0.7495602
## Gini:  0.7660191
## 
## Confusion Matrix (vertical: actual; across: predicted) for F1-optimal threshold:
##         No Yes    Error       Rate
## No     851  40 0.044893    =40/891
## Yes     62 112 0.356322    =62/174
## Totals 913 152 0.095775  =102/1065
## 
## Maximum Metrics: Maximum metrics at their respective thresholds
##                         metric threshold      value idx
## 1                       max f1  0.370729   0.687117 135
## 2                       max f2  0.143642   0.734086 224
## 3                 max f0point5  0.417696   0.740741 117
## 4                 max accuracy  0.417696   0.907981 117
## 5                max precision  0.985300   1.000000   0
## 6                   max recall  0.000470   1.000000 397
## 7              max specificity  0.985300   1.000000   0
## 8             max absolute_mcc  0.413391   0.636424 119
## 9   max min_per_class_accuracy  0.132450   0.832772 232
## 10 max mean_per_class_accuracy  0.143642   0.835162 224
## 11                     max tns  0.985300 891.000000   0
## 12                     max fns  0.985300 173.000000   0
## 13                     max fps  0.000092 891.000000 399
## 14                     max tps  0.000470 174.000000 397
## 15                     max tnr  0.985300   1.000000   0
## 16                     max fnr  0.985300   0.994253   0
## 17                     max fpr  0.000092   1.000000 399
## 18                     max tpr  0.000470   1.000000 397
## 
## Gains/Lift Table: Extract with `h2o.gainsLift(&lt;model&gt;, &lt;data&gt;)` or `h2o.gainsLift(&lt;model&gt;, valid=&lt;T/F&gt;, xval=&lt;T/F&gt;)`
## H2OBinomialMetrics: deeplearning
## ** Reported on validation data. **
## ** Metrics reported on full validation frame **
## 
## MSE:  0.09475117
## RMSE:  0.3078168
## LogLoss:  0.3335944
## Mean Per-Class Error:  0.2357562
## AUC:  0.8483452
## AUCPR:  0.6613637
## Gini:  0.6966904
## 
## Confusion Matrix (vertical: actual; across: predicted) for F1-optimal threshold:
##         No Yes    Error     Rate
## No     141  13 0.084416  =13/154
## Yes     12  19 0.387097   =12/31
## Totals 153  32 0.135135  =25/185
## 
## Maximum Metrics: Maximum metrics at their respective thresholds
##                         metric threshold      value idx
## 1                       max f1  0.245332   0.603175  31
## 2                       max f2  0.067721   0.688776  71
## 3                 max f0point5  0.537436   0.704225   9
## 4                 max accuracy  0.537436   0.886486   9
## 5                max precision  0.942423   1.000000   0
## 6                   max recall  0.002005   1.000000 167
## 7              max specificity  0.942423   1.000000   0
## 8             max absolute_mcc  0.537436   0.532795   9
## 9   max min_per_class_accuracy  0.084346   0.759740  60
## 10 max mean_per_class_accuracy  0.067721   0.789380  71
## 11                     max tns  0.942423 154.000000   0
## 12                     max fns  0.942423  30.000000   0
## 13                     max fps  0.000032 154.000000 184
## 14                     max tps  0.002005  31.000000 167
## 15                     max tnr  0.942423   1.000000   0
## 16                     max fnr  0.942423   0.967742   0
## 17                     max fpr  0.000032   1.000000 184
## 18                     max tpr  0.002005   1.000000 167
## 
## Gains/Lift Table: Extract with `h2o.gainsLift(&lt;model&gt;, &lt;data&gt;)` or `h2o.gainsLift(&lt;model&gt;, valid=&lt;T/F&gt;, xval=&lt;T/F&gt;)`
## H2OBinomialMetrics: deeplearning
## ** Reported on cross-validation data. **
## ** 5-fold cross-validation on training data (Metrics computed for combined holdout predictions) **
## 
## MSE:  0.1028375
## RMSE:  0.3206829
## LogLoss:  0.379051
## Mean Per-Class Error:  0.2723306
## AUC:  0.8119832
## AUCPR:  0.5698533
## Gini:  0.6239664
## 
## Confusion Matrix (vertical: actual; across: predicted) for F1-optimal threshold:
##         No Yes    Error       Rate
## No     800  91 0.102132    =91/891
## Yes     77  97 0.442529    =77/174
## Totals 877 188 0.157746  =168/1065
## 
## Maximum Metrics: Maximum metrics at their respective thresholds
##                         metric threshold      value idx
## 1                       max f1  0.242384   0.535912 158
## 2                       max f2  0.093173   0.644851 249
## 3                 max f0point5  0.463930   0.577617  85
## 4                 max accuracy  0.463930   0.867606  85
## 5                max precision  0.991261   1.000000   0
## 6                   max recall  0.000112   1.000000 399
## 7              max specificity  0.991261   1.000000   0
## 8             max absolute_mcc  0.312119   0.446658 135
## 9   max min_per_class_accuracy  0.093173   0.765432 249
## 10 max mean_per_class_accuracy  0.093173   0.767774 249
## 11                     max tns  0.991261 891.000000   0
## 12                     max fns  0.991261 173.000000   0
## 13                     max fps  0.000112 891.000000 399
## 14                     max tps  0.000112 174.000000 399
## 15                     max tnr  0.991261   1.000000   0
## 16                     max fnr  0.991261   0.994253   0
## 17                     max fpr  0.000112   1.000000 399
## 18                     max tpr  0.000112   1.000000 399
## 
## Gains/Lift Table: Extract with `h2o.gainsLift(&lt;model&gt;, &lt;data&gt;)` or `h2o.gainsLift(&lt;model&gt;, valid=&lt;T/F&gt;, xval=&lt;T/F&gt;)`
## Cross-Validation Metrics Summary: 
##                 mean          sd cv_1_valid  cv_2_valid cv_3_valid cv_4_valid
## accuracy  0.83849764  0.03159872 0.82159626   0.8873239  0.8450704  0.8356807
## auc        0.8123368  0.03071012 0.85849625  0.79953915 0.79471767  0.8273086
## aucpr     0.58174056 0.031881295 0.61311966   0.5357655 0.57348037  0.6110276
## err       0.16150235  0.03159872 0.17840375 0.112676054 0.15492958 0.16431925
## err_count       34.4   6.7305274       38.0        24.0       33.0       35.0
##           cv_5_valid
## accuracy   0.8028169
## auc       0.78162223
## aucpr      0.5753098
## err        0.1971831
## err_count       42.0
## 
## ---
##                   mean          sd cv_1_valid cv_2_valid cv_3_valid cv_4_valid
## pr_auc      0.58174056 0.031881295 0.61311966  0.5357655 0.57348037  0.6110276
## precision   0.51704663  0.06993628        0.5       0.64  0.4651163 0.49122807
## r2          0.24570748 0.044391796 0.29853022 0.24172334 0.21772787 0.28042224
## recall       0.6612137  0.13541651  0.7631579   0.516129  0.6666667  0.8235294
## rmse        0.32017824  0.02010566  0.3206533 0.30707946 0.30767024 0.31068856
## specificity   0.872684 0.046863902 0.83428574  0.9505494 0.87431693 0.83798885
##             cv_5_valid
## pr_auc       0.5753098
## precision    0.4888889
## r2          0.19013378
## recall       0.5365854
## rmse        0.35479966
## specificity 0.86627907</code></pre>
<pre class="r"><code>explainer &lt;- train_tbl %&gt;%
  select(-Attrition) %&gt;%
  lime(
    model           = automl_leader,
    bin_continuous  = TRUE,
    n_bins          = 4,
    quantile_bins   = TRUE
  )

explanation &lt;- test_tbl %&gt;%
  select(-Attrition) %&gt;%
  lime::explain(
    
    # Pass our explainer object
    explainer = explainer,
    # Because it is a binary classification model: 1
    n_labels   = 1,
    # number of features to be returned
    n_features = 8,
    # number of localized linear models
    n_permutations = 5000,
    # Let&#39;s start with 1
    kernel_width   = 1
  )</code></pre>
<pre><code>## 
  |                                                                            
  |                                                                      |   0%
  |                                                                            
  |======================================================================| 100%
## 
  |                                                                            
  |                                                                      |   0%
  |                                                                            
  |======================================================================| 100%</code></pre>
<pre class="r"><code>case_1 &lt;- explanation %&gt;%
  filter(case == 1)

# Plot Function 
plot_features_recreated &lt;- function(explanation, ncol = 2, cases = NULL) {
  
  type_pal &lt;- c(&#39;Supports&#39;, &#39;Contradicts&#39;)
  explanation$type &lt;- factor(ifelse(sign(explanation$feature_weight) == 1, type_pal[1], type_pal[2]), levels = type_pal)
  description &lt;- paste0(explanation$case, &#39;_&#39;, explanation[[&#39;label&#39;]])
  desc_width &lt;- max(nchar(description)) + 1
  description &lt;- paste0(format(description, width = desc_width), explanation$feature_desc)
  explanation$description &lt;- factor(description, levels = description[order(abs(explanation$feature_weight))])
  explanation$case &lt;- factor(explanation$case, unique(explanation$case))
  explanation$`Explanation fit` &lt;- format(explanation$model_r2, digits = 2)
  
    explanation$probability &lt;- format(explanation$label_prob, digits = 2)
    explanation$label &lt;- factor(explanation$label, unique(explanation$label[order(explanation$label_prob, decreasing = TRUE)]))
    ggplot(explanation) +
    facet_wrap(~ case + label + probability + `Explanation fit`, labeller  = label_both_upper, scales = &#39;free_y&#39;, ncol = ncol)+
    geom_col(aes_(~description, ~feature_weight, fill = ~type)) +
    coord_flip() +
    scale_fill_manual(values = c(&#39;steelblue&#39;, &#39;firebrick&#39;), drop = FALSE) +
    scale_x_discrete(labels = function(lab) substr(lab, desc_width + 1, nchar(lab))) +
    labs(y = &#39;Weight&#39;, x = &#39;Feature&#39;, fill = &#39;&#39;) 
}

label_both_upper &lt;- function(labels, multi_line = TRUE, sep = &#39;: &#39;) {
  label_both(labels, multi_line, sep)
}

plot_features_recreated(explanation = case_1, ncol = 1)</code></pre>
<p><img src="05_lime_files/figure-html/unnamed-chunk-1-1.png" width="672" /></p>
<pre class="r"><code># Multiple Explanations
explanation &lt;- test_tbl %&gt;%
  slice(1:20) %&gt;%
  select(-Attrition) %&gt;%
  lime::explain(
    explainer = explainer,
    n_labels   = 1,
    n_features = 8,
    n_permutations = 5000,
    kernel_width   = 0.5
  )</code></pre>
<pre><code>## 
  |                                                                            
  |                                                                      |   0%
  |                                                                            
  |======================================================================| 100%
## 
  |                                                                            
  |                                                                      |   0%
  |                                                                            
  |======================================================================| 100%</code></pre>
<pre class="r"><code>explanation %&gt;%
  as.tibble()</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["model_type"],"name":[1],"type":["chr"],"align":["left"]},{"label":["case"],"name":[2],"type":["chr"],"align":["left"]},{"label":["label"],"name":[3],"type":["chr"],"align":["left"]},{"label":["label_prob"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["model_r2"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["model_intercept"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["model_prediction"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["feature"],"name":[8],"type":["chr"],"align":["left"]},{"label":["feature_value"],"name":[9],"type":["dbl"],"align":["right"]},{"label":["feature_weight"],"name":[10],"type":["dbl"],"align":["right"]},{"label":["feature_desc"],"name":[11],"type":["chr"],"align":["left"]},{"label":["data"],"name":[12],"type":["list"],"align":["right"]},{"label":["prediction"],"name":[13],"type":["list"],"align":["right"]}],"data":[{"1":"classification","2":"1","3":"Yes","4":"0.7106564","5":"0.3473565","6":"0.0749799","7":"0.3751523","8":"OverTime","9":"2","10":"0.18185942","11":"OverTime = Yes","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"1","3":"Yes","4":"0.7106564","5":"0.3473565","6":"0.0749799","7":"0.3751523","8":"NumCompaniesWorked","9":"8","10":"0.10330210","11":"4 < NumCompaniesWorked","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"1","3":"Yes","4":"0.7106564","5":"0.3473565","6":"0.0749799","7":"0.3751523","8":"StockOptionLevel","9":"1","10":"0.09892538","11":"StockOptionLevel = 0","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"1","3":"Yes","4":"0.7106564","5":"0.3473565","6":"0.0749799","7":"0.3751523","8":"YearsSinceLastPromotion","9":"0","10":"-0.07230826","11":"YearsSinceLastPromotion <= 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"1","3":"Yes","4":"0.7106564","5":"0.3473565","6":"0.0749799","7":"0.3751523","8":"JobLevel","9":"2","10":"-0.06465609","11":"JobLevel = 2","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"1","3":"Yes","4":"0.7106564","5":"0.3473565","6":"0.0749799","7":"0.3751523","8":"RelationshipSatisfaction","9":"1","10":"0.05386573","11":"RelationshipSatisfaction = Low","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"1","3":"Yes","4":"0.7106564","5":"0.3473565","6":"0.0749799","7":"0.3751523","8":"JobSatisfaction","9":"4","10":"-0.04683183","11":"JobSatisfaction = Very High","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"1","3":"Yes","4":"0.7106564","5":"0.3473565","6":"0.0749799","7":"0.3751523","8":"JobRole","9":"8","10":"0.04601592","11":"JobRole = Sales Executive","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"2","3":"No","4":"0.9096175","5":"0.3353533","6":"0.8704521","7":"0.7894436","8":"OverTime","9":"2","10":"-0.17494431","11":"OverTime = Yes","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"2","3":"No","4":"0.9096175","5":"0.3353533","6":"0.8704521","7":"0.7894436","8":"StockOptionLevel","9":"1","10":"-0.09198856","11":"StockOptionLevel = 0","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"2","3":"No","4":"0.9096175","5":"0.3353533","6":"0.8704521","7":"0.7894436","8":"JobLevel","9":"2","10":"0.07332569","11":"JobLevel = 2","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"2","3":"No","4":"0.9096175","5":"0.3353533","6":"0.8704521","7":"0.7894436","8":"YearsSinceLastPromotion","9":"0","10":"0.07217846","11":"YearsSinceLastPromotion <= 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"2","3":"No","4":"0.9096175","5":"0.3353533","6":"0.8704521","7":"0.7894436","8":"NumCompaniesWorked","9":"0","10":"0.06228289","11":"NumCompaniesWorked <= 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"2","3":"No","4":"0.9096175","5":"0.3353533","6":"0.8704521","7":"0.7894436","8":"YearsWithCurrManager","9":"8","10":"0.06243087","11":"7 < YearsWithCurrManager","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"2","3":"No","4":"0.9096175","5":"0.3353533","6":"0.8704521","7":"0.7894436","8":"DailyRate","9":"153","10":"-0.04326700","11":"DailyRate <= 469","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"2","3":"No","4":"0.9096175","5":"0.3353533","6":"0.8704521","7":"0.7894436","8":"DistanceFromHome","9":"15","10":"-0.04102655","11":"13 < DistanceFromHome","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"3","3":"No","4":"0.9956670","5":"0.3407369","6":"0.6916574","7":"1.0146273","8":"OverTime","9":"1","10":"0.17336307","11":"OverTime = No","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"3","3":"No","4":"0.9956670","5":"0.3407369","6":"0.6916574","7":"1.0146273","8":"YearsSinceLastPromotion","9":"8","10":"-0.09320158","11":"3 < YearsSinceLastPromotion","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"3","3":"No","4":"0.9956670","5":"0.3407369","6":"0.6916574","7":"1.0146273","8":"StockOptionLevel","9":"2","10":"0.07157970","11":"StockOptionLevel = 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"3","3":"No","4":"0.9956670","5":"0.3407369","6":"0.6916574","7":"1.0146273","8":"YearsInCurrentRole","9":"9","10":"0.06487444","11":"7 < YearsInCurrentRole","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"3","3":"No","4":"0.9956670","5":"0.3407369","6":"0.6916574","7":"1.0146273","8":"JobSatisfaction","9":"1","10":"-0.06454244","11":"JobSatisfaction = Low","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"3","3":"No","4":"0.9956670","5":"0.3407369","6":"0.6916574","7":"1.0146273","8":"MonthlyIncome","9":"9980","10":"0.05830797","11":"8389 < MonthlyIncome","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"3","3":"No","4":"0.9956670","5":"0.3407369","6":"0.6916574","7":"1.0146273","8":"NumCompaniesWorked","9":"1","10":"0.05940010","11":"NumCompaniesWorked <= 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"3","3":"No","4":"0.9956670","5":"0.3407369","6":"0.6916574","7":"1.0146273","8":"YearsWithCurrManager","9":"8","10":"0.05318866","11":"7 < YearsWithCurrManager","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"4","3":"No","4":"0.9006805","5":"0.3028988","6":"0.8975853","7":"0.7393944","8":"OverTime","9":"2","10":"-0.17965797","11":"OverTime = Yes","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"4","3":"No","4":"0.9006805","5":"0.3028988","6":"0.8975853","7":"0.7393944","8":"EnvironmentSatisfaction","9":"1","10":"-0.08820439","11":"EnvironmentSatisfaction = Low","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"4","3":"No","4":"0.9006805","5":"0.3028988","6":"0.8975853","7":"0.7393944","8":"YearsSinceLastPromotion","9":"0","10":"0.07060176","11":"YearsSinceLastPromotion <= 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"4","3":"No","4":"0.9006805","5":"0.3028988","6":"0.8975853","7":"0.7393944","8":"JobLevel","9":"1","10":"-0.07040324","11":"JobLevel = 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"4","3":"No","4":"0.9006805","5":"0.3028988","6":"0.8975853","7":"0.7393944","8":"NumCompaniesWorked","9":"0","10":"0.06547758","11":"NumCompaniesWorked <= 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"4","3":"No","4":"0.9006805","5":"0.3028988","6":"0.8975853","7":"0.7393944","8":"JobRole","9":"7","10":"0.04965880","11":"JobRole = Research Scientist","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"4","3":"No","4":"0.9006805","5":"0.3028988","6":"0.8975853","7":"0.7393944","8":"YearsInCurrentRole","9":"2","10":"-0.04786058","11":"YearsInCurrentRole <= 2","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"4","3":"No","4":"0.9006805","5":"0.3028988","6":"0.8975853","7":"0.7393944","8":"StockOptionLevel","9":"3","10":"0.04219710","11":"StockOptionLevel = 2","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"5","3":"No","4":"0.9952036","5":"0.3141797","6":"0.7931024","7":"0.9015857","8":"OverTime","9":"1","10":"0.18381248","11":"OverTime = No","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"5","3":"No","4":"0.9952036","5":"0.3141797","6":"0.7931024","7":"0.9015857","8":"StockOptionLevel","9":"1","10":"-0.09245546","11":"StockOptionLevel = 0","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"5","3":"No","4":"0.9952036","5":"0.3141797","6":"0.7931024","7":"0.9015857","8":"MonthlyIncome","9":"18947","10":"0.06605469","11":"8389 < MonthlyIncome","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"5","3":"No","4":"0.9952036","5":"0.3141797","6":"0.7931024","7":"0.9015857","8":"JobSatisfaction","9":"1","10":"-0.06641118","11":"JobSatisfaction = Low","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"5","3":"No","4":"0.9952036","5":"0.3141797","6":"0.7931024","7":"0.9015857","8":"TotalWorkingYears","9":"22","10":"0.06247575","11":"15 < TotalWorkingYears","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"5","3":"No","4":"0.9952036","5":"0.3141797","6":"0.7931024","7":"0.9015857","8":"YearsWithCurrManager","9":"1","10":"-0.04886117","11":"YearsWithCurrManager <= 2","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"5","3":"No","4":"0.9952036","5":"0.3141797","6":"0.7931024","7":"0.9015857","8":"Age","9":"46","10":"0.04097650","11":"43 < Age","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"5","3":"No","4":"0.9952036","5":"0.3141797","6":"0.7931024","7":"0.9015857","8":"YearsInCurrentRole","9":"2","10":"-0.03710829","11":"YearsInCurrentRole <= 2","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"6","3":"No","4":"0.7880092","5":"0.3292550","6":"0.8046102","7":"0.8030252","8":"OverTime","9":"1","10":"0.18416170","11":"OverTime = No","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"6","3":"No","4":"0.7880092","5":"0.3292550","6":"0.8046102","7":"0.8030252","8":"StockOptionLevel","9":"1","10":"-0.09252326","11":"StockOptionLevel = 0","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"6","3":"No","4":"0.7880092","5":"0.3292550","6":"0.8046102","7":"0.8030252","8":"JobLevel","9":"1","10":"-0.06736702","11":"JobLevel = 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"6","3":"No","4":"0.7880092","5":"0.3292550","6":"0.8046102","7":"0.8030252","8":"NumCompaniesWorked","9":"1","10":"0.06764816","11":"NumCompaniesWorked <= 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"6","3":"No","4":"0.7880092","5":"0.3292550","6":"0.8046102","7":"0.8030252","8":"MonthlyIncome","9":"2014","10":"-0.05535413","11":"MonthlyIncome <= 2889","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"6","3":"No","4":"0.7880092","5":"0.3292550","6":"0.8046102","7":"0.8030252","8":"JobSatisfaction","9":"4","10":"0.05655314","11":"JobSatisfaction = Very High","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"6","3":"No","4":"0.7880092","5":"0.3292550","6":"0.8046102","7":"0.8030252","8":"YearsWithCurrManager","9":"2","10":"-0.05344094","11":"YearsWithCurrManager <= 2","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"6","3":"No","4":"0.7880092","5":"0.3292550","6":"0.8046102","7":"0.8030252","8":"TotalWorkingYears","9":"2","10":"-0.04126260","11":"TotalWorkingYears <= 6","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"7","3":"No","4":"0.9891669","5":"0.3008750","6":"0.6765894","7":"0.9064542","8":"OverTime","9":"1","10":"0.16681944","11":"OverTime = No","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"7","3":"No","4":"0.9891669","5":"0.3008750","6":"0.6765894","7":"0.9064542","8":"JobLevel","9":"1","10":"-0.06962592","11":"JobLevel = 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"7","3":"No","4":"0.9891669","5":"0.3008750","6":"0.6765894","7":"0.9064542","8":"JobSatisfaction","9":"1","10":"-0.06932245","11":"JobSatisfaction = Low","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"7","3":"No","4":"0.9891669","5":"0.3008750","6":"0.6765894","7":"0.9064542","8":"StockOptionLevel","9":"2","10":"0.06672729","11":"StockOptionLevel = 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"7","3":"No","4":"0.9891669","5":"0.3008750","6":"0.6765894","7":"0.9064542","8":"NumCompaniesWorked","9":"1","10":"0.06576477","11":"NumCompaniesWorked <= 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"7","3":"No","4":"0.9891669","5":"0.3008750","6":"0.6765894","7":"0.9064542","8":"YearsSinceLastPromotion","9":"0","10":"0.06114367","11":"YearsSinceLastPromotion <= 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"7","3":"No","4":"0.9891669","5":"0.3008750","6":"0.6765894","7":"0.9064542","8":"Department","9":"2","10":"0.04789811","11":"Department = Research & Development","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"7","3":"No","4":"0.9891669","5":"0.3008750","6":"0.6765894","7":"0.9064542","8":"MonthlyIncome","9":"2341","10":"-0.03954010","11":"MonthlyIncome <= 2889","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"8","3":"Yes","4":"0.6102014","5":"0.3128559","6":"0.1924983","7":"0.2055406","8":"OverTime","9":"1","10":"-0.18119793","11":"OverTime = No","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"8","3":"Yes","4":"0.6102014","5":"0.3128559","6":"0.1924983","7":"0.2055406","8":"StockOptionLevel","9":"1","10":"0.09589612","11":"StockOptionLevel = 0","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"8","3":"Yes","4":"0.6102014","5":"0.3128559","6":"0.1924983","7":"0.2055406","8":"JobLevel","9":"1","10":"0.06867412","11":"JobLevel = 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"8","3":"Yes","4":"0.6102014","5":"0.3128559","6":"0.1924983","7":"0.2055406","8":"YearsSinceLastPromotion","9":"0","10":"-0.06042441","11":"YearsSinceLastPromotion <= 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"8","3":"Yes","4":"0.6102014","5":"0.3128559","6":"0.1924983","7":"0.2055406","8":"DistanceFromHome","9":"19","10":"0.05089238","11":"13 < DistanceFromHome","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"8","3":"Yes","4":"0.6102014","5":"0.3128559","6":"0.1924983","7":"0.2055406","8":"JobRole","9":"7","10":"-0.04589576","11":"JobRole = Research Scientist","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"8","3":"Yes","4":"0.6102014","5":"0.3128559","6":"0.1924983","7":"0.2055406","8":"YearsWithCurrManager","9":"0","10":"0.04209970","11":"YearsWithCurrManager <= 2","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"8","3":"Yes","4":"0.6102014","5":"0.3128559","6":"0.1924983","7":"0.2055406","8":"DailyRate","9":"408","10":"0.04299803","11":"DailyRate <= 469","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"9","3":"No","4":"0.7077332","5":"0.3284672","6":"0.9027889","7":"0.7479379","8":"OverTime","9":"2","10":"-0.16414146","11":"OverTime = Yes","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"9","3":"No","4":"0.7077332","5":"0.3284672","6":"0.9027889","7":"0.7479379","8":"StockOptionLevel","9":"1","10":"-0.09803363","11":"StockOptionLevel = 0","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"9","3":"No","4":"0.7077332","5":"0.3284672","6":"0.9027889","7":"0.7479379","8":"EnvironmentSatisfaction","9":"1","10":"-0.07587519","11":"EnvironmentSatisfaction = Low","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"9","3":"No","4":"0.7077332","5":"0.3284672","6":"0.9027889","7":"0.7479379","8":"JobLevel","9":"2","10":"0.06931614","11":"JobLevel = 2","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"9","3":"No","4":"0.7077332","5":"0.3284672","6":"0.9027889","7":"0.7479379","8":"YearsWithCurrManager","9":"8","10":"0.06344559","11":"7 < YearsWithCurrManager","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"9","3":"No","4":"0.7077332","5":"0.3284672","6":"0.9027889","7":"0.7479379","8":"YearsSinceLastPromotion","9":"0","10":"0.05972414","11":"YearsSinceLastPromotion <= 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"9","3":"No","4":"0.7077332","5":"0.3284672","6":"0.9027889","7":"0.7479379","8":"BusinessTravel","9":"3","10":"-0.05696434","11":"BusinessTravel = Travel_Frequently","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"9","3":"No","4":"0.7077332","5":"0.3284672","6":"0.9027889","7":"0.7479379","8":"JobSatisfaction","9":"4","10":"0.04767776","11":"JobSatisfaction = Very High","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"10","3":"No","4":"0.8927485","5":"0.2797610","6":"0.8652195","7":"0.8127413","8":"OverTime","9":"2","10":"-0.18222595","11":"OverTime = Yes","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"10","3":"No","4":"0.8927485","5":"0.2797610","6":"0.8652195","7":"0.8127413","8":"JobSatisfaction","9":"1","10":"-0.08341916","11":"JobSatisfaction = Low","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"10","3":"No","4":"0.8927485","5":"0.2797610","6":"0.8652195","7":"0.8127413","8":"StockOptionLevel","9":"2","10":"0.08250772","11":"StockOptionLevel = 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"10","3":"No","4":"0.8927485","5":"0.2797610","6":"0.8652195","7":"0.8127413","8":"MonthlyIncome","9":"9884","10":"0.05914235","11":"8389 < MonthlyIncome","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"10","3":"No","4":"0.8927485","5":"0.2797610","6":"0.8652195","7":"0.8127413","8":"Department","9":"2","10":"0.04668601","11":"Department = Research & Development","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"10","3":"No","4":"0.8927485","5":"0.2797610","6":"0.8652195","7":"0.8127413","8":"YearsInCurrentRole","9":"0","10":"-0.04094607","11":"YearsInCurrentRole <= 2","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"10","3":"No","4":"0.8927485","5":"0.2797610","6":"0.8652195","7":"0.8127413","8":"BusinessTravel","9":"1","10":"0.03533561","11":"BusinessTravel = Non-Travel","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"10","3":"No","4":"0.8927485","5":"0.2797610","6":"0.8652195","7":"0.8127413","8":"EducationField","9":"4","10":"0.03044136","11":"EducationField = Medical","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"11","3":"No","4":"0.5085810","5":"0.3377626","6":"0.8541867","7":"0.7259840","8":"OverTime","9":"2","10":"-0.17677433","11":"OverTime = Yes","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"11","3":"No","4":"0.5085810","5":"0.3377626","6":"0.8541867","7":"0.7259840","8":"NumCompaniesWorked","9":"7","10":"-0.11099849","11":"4 < NumCompaniesWorked","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"11","3":"No","4":"0.5085810","5":"0.3377626","6":"0.8541867","7":"0.7259840","8":"StockOptionLevel","9":"2","10":"0.07889276","11":"StockOptionLevel = 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"11","3":"No","4":"0.5085810","5":"0.3377626","6":"0.8541867","7":"0.7259840","8":"JobLevel","9":"2","10":"0.07586066","11":"JobLevel = 2","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"11","3":"No","4":"0.5085810","5":"0.3377626","6":"0.8541867","7":"0.7259840","8":"YearsSinceLastPromotion","9":"0","10":"0.06321655","11":"YearsSinceLastPromotion <= 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"11","3":"No","4":"0.5085810","5":"0.3377626","6":"0.8541867","7":"0.7259840","8":"DistanceFromHome","9":"23","10":"-0.05410256","11":"13 < DistanceFromHome","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"11","3":"No","4":"0.5085810","5":"0.3377626","6":"0.8541867","7":"0.7259840","8":"JobRole","9":"8","10":"-0.05028435","11":"JobRole = Sales Executive","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"11","3":"No","4":"0.5085810","5":"0.3377626","6":"0.8541867","7":"0.7259840","8":"JobSatisfaction","9":"4","10":"0.04598707","11":"JobSatisfaction = Very High","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"12","3":"No","4":"0.9993503","5":"0.2798731","6":"0.6020457","7":"1.1249379","8":"OverTime","9":"1","10":"0.17826442","11":"OverTime = No","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"12","3":"No","4":"0.9993503","5":"0.2798731","6":"0.6020457","7":"1.1249379","8":"StockOptionLevel","9":"2","10":"0.07423400","11":"StockOptionLevel = 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"12","3":"No","4":"0.9993503","5":"0.2798731","6":"0.6020457","7":"1.1249379","8":"JobLevel","9":"2","10":"0.05767236","11":"JobLevel = 2","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"12","3":"No","4":"0.9993503","5":"0.2798731","6":"0.6020457","7":"1.1249379","8":"YearsSinceLastPromotion","9":"1","10":"0.05704245","11":"YearsSinceLastPromotion <= 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"12","3":"No","4":"0.9993503","5":"0.2798731","6":"0.6020457","7":"1.1249379","8":"JobSatisfaction","9":"4","10":"0.04735876","11":"JobSatisfaction = Very High","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"12","3":"No","4":"0.9993503","5":"0.2798731","6":"0.6020457","7":"1.1249379","8":"Department","9":"2","10":"0.03874232","11":"Department = Research & Development","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"12","3":"No","4":"0.9993503","5":"0.2798731","6":"0.6020457","7":"1.1249379","8":"RelationshipSatisfaction","9":"4","10":"0.03672038","11":"RelationshipSatisfaction = Very High","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"12","3":"No","4":"0.9993503","5":"0.2798731","6":"0.6020457","7":"1.1249379","8":"PercentSalaryHike","9":"22","10":"0.03285756","11":"18 < PercentSalaryHike","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"13","3":"No","4":"0.9974392","5":"0.2655313","6":"0.8967728","7":"0.8014948","8":"OverTime","9":"2","10":"-0.18000218","11":"OverTime = Yes","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"13","3":"No","4":"0.9974392","5":"0.2655313","6":"0.8967728","7":"0.8014948","8":"TotalWorkingYears","9":"21","10":"0.05881499","11":"15 < TotalWorkingYears","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"13","3":"No","4":"0.9974392","5":"0.2655313","6":"0.8967728","7":"0.8014948","8":"MonthlyIncome","9":"14756","10":"0.05652510","11":"8389 < MonthlyIncome","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"13","3":"No","4":"0.9974392","5":"0.2655313","6":"0.8967728","7":"0.8014948","8":"YearsSinceLastPromotion","9":"0","10":"0.05747344","11":"YearsSinceLastPromotion <= 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"13","3":"No","4":"0.9974392","5":"0.2655313","6":"0.8967728","7":"0.8014948","8":"YearsInCurrentRole","9":"0","10":"-0.04660550","11":"YearsInCurrentRole <= 2","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"13","3":"No","4":"0.9974392","5":"0.2655313","6":"0.8967728","7":"0.8014948","8":"YearsWithCurrManager","9":"2","10":"-0.04221692","11":"YearsWithCurrManager <= 2","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"13","3":"No","4":"0.9974392","5":"0.2655313","6":"0.8967728","7":"0.8014948","8":"Department","9":"2","10":"0.03916654","11":"Department = Research & Development","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"13","3":"No","4":"0.9974392","5":"0.2655313","6":"0.8967728","7":"0.8014948","8":"TrainingTimesLastYear","9":"2","10":"-0.03843358","11":"TrainingTimesLastYear <= 2","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"14","3":"No","4":"0.9949540","5":"0.3131887","6":"0.6481849","7":"1.0146150","8":"OverTime","9":"1","10":"0.19078144","11":"OverTime = No","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"14","3":"No","4":"0.9949540","5":"0.3131887","6":"0.6481849","7":"1.0146150","8":"StockOptionLevel","9":"2","10":"0.06839946","11":"StockOptionLevel = 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"14","3":"No","4":"0.9949540","5":"0.3131887","6":"0.6481849","7":"1.0146150","8":"YearsSinceLastPromotion","9":"0","10":"0.06790084","11":"YearsSinceLastPromotion <= 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"14","3":"No","4":"0.9949540","5":"0.3131887","6":"0.6481849","7":"1.0146150","8":"JobLevel","9":"1","10":"-0.06418511","11":"JobLevel = 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"14","3":"No","4":"0.9949540","5":"0.3131887","6":"0.6481849","7":"1.0146150","8":"NumCompaniesWorked","9":"0","10":"0.05687985","11":"NumCompaniesWorked <= 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"14","3":"No","4":"0.9949540","5":"0.3131887","6":"0.6481849","7":"1.0146150","8":"RelationshipSatisfaction","9":"4","10":"0.04265930","11":"RelationshipSatisfaction = Very High","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"14","3":"No","4":"0.9949540","5":"0.3131887","6":"0.6481849","7":"1.0146150","8":"JobRole","9":"7","10":"0.04273192","11":"JobRole = Research Scientist","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"14","3":"No","4":"0.9949540","5":"0.3131887","6":"0.6481849","7":"1.0146150","8":"MonthlyIncome","9":"2703","10":"-0.03873752","11":"MonthlyIncome <= 2889","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"15","3":"No","4":"0.9897406","5":"0.3277856","6":"0.7137952","7":"1.0263146","8":"OverTime","9":"1","10":"0.17515901","11":"OverTime = No","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"15","3":"No","4":"0.9897406","5":"0.3277856","6":"0.7137952","7":"1.0263146","8":"StockOptionLevel","9":"1","10":"-0.09380891","11":"StockOptionLevel = 0","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"15","3":"No","4":"0.9897406","5":"0.3277856","6":"0.7137952","7":"1.0263146","8":"JobSatisfaction","9":"1","10":"-0.07452969","11":"JobSatisfaction = Low","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"15","3":"No","4":"0.9897406","5":"0.3277856","6":"0.7137952","7":"1.0263146","8":"YearsWithCurrManager","9":"8","10":"0.06882786","11":"7 < YearsWithCurrManager","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"15","3":"No","4":"0.9897406","5":"0.3277856","6":"0.7137952","7":"1.0263146","8":"NumCompaniesWorked","9":"0","10":"0.05974293","11":"NumCompaniesWorked <= 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"15","3":"No","4":"0.9897406","5":"0.3277856","6":"0.7137952","7":"1.0263146","8":"JobLevel","9":"2","10":"0.06110946","11":"JobLevel = 2","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"15","3":"No","4":"0.9897406","5":"0.3277856","6":"0.7137952","7":"1.0263146","8":"YearsInCurrentRole","9":"13","10":"0.05977153","11":"7 < YearsInCurrentRole","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"15","3":"No","4":"0.9897406","5":"0.3277856","6":"0.7137952","7":"1.0263146","8":"TotalWorkingYears","9":"16","10":"0.05624716","11":"15 < TotalWorkingYears","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"16","3":"No","4":"0.6221096","5":"0.3326080","6":"0.9661962","7":"0.6764542","8":"OverTime","9":"2","10":"-0.19151087","11":"OverTime = Yes","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"16","3":"No","4":"0.6221096","5":"0.3326080","6":"0.9661962","7":"0.6764542","8":"StockOptionLevel","9":"1","10":"-0.09376671","11":"StockOptionLevel = 0","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"16","3":"No","4":"0.6221096","5":"0.3326080","6":"0.9661962","7":"0.6764542","8":"JobSatisfaction","9":"1","10":"-0.06875917","11":"JobSatisfaction = Low","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"16","3":"No","4":"0.6221096","5":"0.3326080","6":"0.9661962","7":"0.6764542","8":"MonthlyIncome","9":"13245","10":"0.06289462","11":"8389 < MonthlyIncome","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"16","3":"No","4":"0.6221096","5":"0.3326080","6":"0.9661962","7":"0.6764542","8":"YearsSinceLastPromotion","9":"0","10":"0.05259926","11":"YearsSinceLastPromotion <= 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"16","3":"No","4":"0.6221096","5":"0.3326080","6":"0.9661962","7":"0.6764542","8":"YearsWithCurrManager","9":"0","10":"-0.05658055","11":"YearsWithCurrManager <= 2","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"16","3":"No","4":"0.6221096","5":"0.3326080","6":"0.9661962","7":"0.6764542","8":"TotalWorkingYears","9":"17","10":"0.05408783","11":"15 < TotalWorkingYears","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"16","3":"No","4":"0.6221096","5":"0.3326080","6":"0.9661962","7":"0.6764542","8":"YearsInCurrentRole","9":"0","10":"-0.04870640","11":"YearsInCurrentRole <= 2","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"17","3":"No","4":"0.9946414","5":"0.3115187","6":"0.6900140","7":"1.0312212","8":"OverTime","9":"1","10":"0.17491929","11":"OverTime = No","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"17","3":"No","4":"0.9946414","5":"0.3115187","6":"0.6900140","7":"1.0312212","8":"YearsSinceLastPromotion","9":"10","10":"-0.09329937","11":"3 < YearsSinceLastPromotion","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"17","3":"No","4":"0.9946414","5":"0.3115187","6":"0.6900140","7":"1.0312212","8":"JobLevel","9":"2","10":"0.06735733","11":"JobLevel = 2","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"17","3":"No","4":"0.9946414","5":"0.3115187","6":"0.6900140","7":"1.0312212","8":"NumCompaniesWorked","9":"1","10":"0.06386983","11":"NumCompaniesWorked <= 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"17","3":"No","4":"0.9946414","5":"0.3115187","6":"0.6900140","7":"1.0312212","8":"YearsWithCurrManager","9":"8","10":"0.06306915","11":"7 < YearsWithCurrManager","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"17","3":"No","4":"0.9946414","5":"0.3115187","6":"0.6900140","7":"1.0312212","8":"YearsInCurrentRole","9":"10","10":"0.06283085","11":"7 < YearsInCurrentRole","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"17","3":"No","4":"0.9946414","5":"0.3115187","6":"0.6900140","7":"1.0312212","8":"JobSatisfaction","9":"4","10":"0.04732812","11":"JobSatisfaction = Very High","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"17","3":"No","4":"0.9946414","5":"0.3115187","6":"0.6900140","7":"1.0312212","8":"Age","9":"30","10":"-0.04486797","11":"Age <= 30","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"18","3":"No","4":"0.9333642","5":"0.2973376","6":"0.6496919","7":"1.0568928","8":"OverTime","9":"1","10":"0.18364281","11":"OverTime = No","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"18","3":"No","4":"0.9333642","5":"0.2973376","6":"0.6496919","7":"1.0568928","8":"StockOptionLevel","9":"2","10":"0.07654010","11":"StockOptionLevel = 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"18","3":"No","4":"0.9333642","5":"0.2973376","6":"0.6496919","7":"1.0568928","8":"YearsSinceLastPromotion","9":"1","10":"0.06602079","11":"YearsSinceLastPromotion <= 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"18","3":"No","4":"0.9333642","5":"0.2973376","6":"0.6496919","7":"1.0568928","8":"JobLevel","9":"2","10":"0.06322193","11":"JobLevel = 2","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"18","3":"No","4":"0.9333642","5":"0.2973376","6":"0.6496919","7":"1.0568928","8":"TotalWorkingYears","9":"17","10":"0.05636944","11":"15 < TotalWorkingYears","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"18","3":"No","4":"0.9333642","5":"0.2973376","6":"0.6496919","7":"1.0568928","8":"Age","9":"44","10":"0.04177145","11":"43 < Age","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"18","3":"No","4":"0.9333642","5":"0.2973376","6":"0.6496919","7":"1.0568928","8":"YearsWithCurrManager","9":"2","10":"-0.04168806","11":"YearsWithCurrManager <= 2","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"18","3":"No","4":"0.9333642","5":"0.2973376","6":"0.6496919","7":"1.0568928","8":"DistanceFromHome","9":"23","10":"-0.03867759","11":"13 < DistanceFromHome","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"19","3":"No","4":"0.9960331","5":"0.3204769","6":"0.6727304","7":"1.0049235","8":"OverTime","9":"1","10":"0.17842726","11":"OverTime = No","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"19","3":"No","4":"0.9960331","5":"0.3204769","6":"0.6727304","7":"1.0049235","8":"NumCompaniesWorked","9":"5","10":"-0.08686247","11":"4 < NumCompaniesWorked","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"19","3":"No","4":"0.9960331","5":"0.3204769","6":"0.6727304","7":"1.0049235","8":"StockOptionLevel","9":"2","10":"0.07095066","11":"StockOptionLevel = 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"19","3":"No","4":"0.9960331","5":"0.3204769","6":"0.6727304","7":"1.0049235","8":"JobLevel","9":"2","10":"0.06742579","11":"JobLevel = 2","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"19","3":"No","4":"0.9960331","5":"0.3204769","6":"0.6727304","7":"1.0049235","8":"YearsSinceLastPromotion","9":"0","10":"0.05431097","11":"YearsSinceLastPromotion <= 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"19","3":"No","4":"0.9960331","5":"0.3204769","6":"0.6727304","7":"1.0049235","8":"TotalWorkingYears","9":"17","10":"0.04838367","11":"15 < TotalWorkingYears","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"19","3":"No","4":"0.9960331","5":"0.3204769","6":"0.6727304","7":"1.0049235","8":"JobSatisfaction","9":"4","10":"0.04359038","11":"JobSatisfaction = Very High","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"19","3":"No","4":"0.9960331","5":"0.3204769","6":"0.6727304","7":"1.0049235","8":"YearsInCurrentRole","9":"0","10":"-0.04403314","11":"YearsInCurrentRole <= 2","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"20","3":"No","4":"0.9870675","5":"0.2909357","6":"0.7678102","7":"0.9026359","8":"OverTime","9":"1","10":"0.18621516","11":"OverTime = No","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"20","3":"No","4":"0.9870675","5":"0.2909357","6":"0.7678102","7":"0.9026359","8":"JobLevel","9":"1","10":"-0.06769655","11":"JobLevel = 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"20","3":"No","4":"0.9870675","5":"0.2909357","6":"0.7678102","7":"0.9026359","8":"NumCompaniesWorked","9":"1","10":"0.06023900","11":"NumCompaniesWorked <= 1","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"20","3":"No","4":"0.9870675","5":"0.2909357","6":"0.7678102","7":"0.9026359","8":"YearsWithCurrManager","9":"1","10":"-0.05128895","11":"YearsWithCurrManager <= 2","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"20","3":"No","4":"0.9870675","5":"0.2909357","6":"0.7678102","7":"0.9026359","8":"JobRole","9":"7","10":"0.04934166","11":"JobRole = Research Scientist","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"20","3":"No","4":"0.9870675","5":"0.2909357","6":"0.7678102","7":"0.9026359","8":"TotalWorkingYears","9":"2","10":"-0.04599453","11":"TotalWorkingYears <= 6","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"20","3":"No","4":"0.9870675","5":"0.2909357","6":"0.7678102","7":"0.9026359","8":"JobSatisfaction","9":"4","10":"0.04362732","11":"JobSatisfaction = Very High","12":"<named list [31]>","13":"<named list [2]>"},{"1":"classification","2":"20","3":"No","4":"0.9870675","5":"0.2909357","6":"0.7678102","7":"0.9026359","8":"YearsInCurrentRole","9":"2","10":"-0.03961746","11":"YearsInCurrentRole <= 2","12":"<named list [31]>","13":"<named list [2]>"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<pre class="r"><code># Explination Function
plot_explanations &lt;- function(explanation, ...) {
  explanation$feature_desc &lt;- factor(
    explanation$feature_desc,
    levels = rev(unique(explanation$feature_desc[order(explanation$feature, explanation$feature_value)]))
  )
  p &lt;- ggplot(explanation, aes_(~case, ~feature_desc)) +
    geom_tile(aes_(fill = ~feature_weight)) +
    scale_x_discrete(&#39;Case&#39;, expand = c(0, 0)) +
    scale_y_discrete(&#39;Feature&#39;, expand = c(0, 0)) +
    scale_fill_gradient2(&#39;Feature\nweight&#39;, low = &#39;firebrick&#39;, mid = &#39;#f7f7f7&#39;, high = &#39;steelblue&#39;)

  if (is.null(explanation$label)) {
    p
  } else {
    p + facet_wrap(~label, ...)
  }
}

plot_explanations(explanation)</code></pre>
<p><img src="05_lime_files/figure-html/unnamed-chunk-1-2.png" width="672" /></p>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
